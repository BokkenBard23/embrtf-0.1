# –û—Ç—á–µ—Ç –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ CallCenter AI v3 –¥–ª—è RTX 3060 12GB

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
**–û—à–∏–±–∫–∞**: `OSError: –§–∞–π–ª –ø–æ–¥–∫–∞—á–∫–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏. (os error 1455)`

**–ü—Ä–∏—á–∏–Ω–∞**: –ú–æ–¥–µ–ª—å `Qwen/Qwen3-Embedding-0.6B` –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ GUI, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–∞–º—è—Ç–∏:
- **–°–∏—Å—Ç–µ–º–∞**: 16GB RAM, RTX 3060 12GB
- **CUDA**: –î–æ—Å—Ç—É–ø–Ω–∞ (–≤–µ—Ä—Å–∏—è 11.8)
- **–ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ**: 2.2GB GPU, 1.8GB RAM
- **–ü—Ä–æ–±–ª–µ–º–∞**: –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ GUI

### –ê–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏:
```
üìä –°–∏—Å—Ç–µ–º–Ω–∞—è –ø–∞–º—è—Ç—å:
  üíæ –í—Å–µ–≥–æ: 15.9 GB
  ‚úÖ –î–æ—Å—Ç—É–ø–Ω–æ: 6.8 GB ‚Üí 5.0 GB (–ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏)
  üìà –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 9.1 GB ‚Üí 10.9 GB (+1.8 GB)

üéÆ GPU –ø–∞–º—è—Ç—å:
  üíæ –í—Å–µ–≥–æ: 12.0 GB
  ‚úÖ –°–≤–æ–±–æ–¥–Ω–æ: 12.0 GB ‚Üí 9.8 GB
  üìà –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: 0.0 GB ‚Üí 2.2 GB
```

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### 1. **–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏**
**–ü—Ä–æ–±–ª–µ–º–∞**: –ú–æ–¥–µ–ª—å –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ GUI
**–†–µ—à–µ–Ω–∏–µ**: –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

```python
def load_initial_data(self):
    """–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–∞—á–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö."""
    # –ù–ï –∑–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥–µ–ª—å –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
    self.load_faiss_indexes()
    self.load_data_lookups()
    self.log_message("üí° –ú–æ–¥–µ–ª—å —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏")
```

### 2. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤**
**–°–æ–∑–¥–∞–Ω**: `optimized_embedding_processor.py`

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤—ã–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (32 —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞ —Ä–∞–∑)
- Mixed precision (float16) –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è RTX 3060

**–ö–ª—é—á–µ–≤—ã–µ –º–µ—Ç–æ–¥—ã**:
```python
class OptimizedEmbeddingProcessor:
    def _load_model_lazy(self):
        """–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏."""
        
    def _unload_model(self):
        """–í—ã–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ –∏–∑ –ø–∞–º—è—Ç–∏."""
        
    def process_texts_batch(self, texts: List[str]) -> np.ndarray:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤ –±–∞—Ç—á–∞–º–∏."""
        
    def process_dialogs_batch(self, dialog_ids: List[str], conn) -> Dict[str, np.ndarray]:
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∏–∞–ª–æ–≥–æ–≤ –±–∞—Ç—á–∞–º–∏."""
```

### 3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è RTX 3060**
**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
- **–†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞**: 32 (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –¥–ª—è RTX 3060)
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: 2048 —Å–∏–º–≤–æ–ª–æ–≤
- **Mixed precision**: float16 (—ç–∫–æ–Ω–æ–º–∏—è 50% –ø–∞–º—è—Ç–∏)
- **–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ**: CUDA —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º fallback –Ω–∞ CPU

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**:
```
üî¨ –ú–∞–ª–µ–Ω—å–∫–∏–π —Ç–µ—Å—Ç (5 —Ç–µ–∫—Å—Ç–æ–≤):
  üíæ GPU –ø–∞–º—è—Ç—å: 1.12GB/12.00GB (9.3%)
  ‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ

üî¨ –°—Ä–µ–¥–Ω–∏–π —Ç–µ—Å—Ç (50 —Ç–µ–∫—Å—Ç–æ–≤):
  üíæ GPU –ø–∞–º—è—Ç—å: 1.12GB/12.00GB (9.3%)
  ‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ

üî¨ –ë–æ–ª—å—à–æ–π —Ç–µ—Å—Ç (200 —Ç–µ–∫—Å—Ç–æ–≤):
  üíæ GPU –ø–∞–º—è—Ç—å: 1.12GB/12.00GB (9.3%)
  ‚úÖ –£—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ
```

### 4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
**–î–æ–±–∞–≤–ª–µ–Ω–æ**:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø–∞–º—è—Ç–∏
- Fallback –Ω–∞ CPU –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å GPU
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ –ø–∞–º—è—Ç–∏
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

```python
def load_models(self):
    """–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π –¥–ª—è RTX 3060."""
    try:
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º CUDA
        if torch.cuda.is_available():
            device = "cuda"
            # –û—á–∏—â–∞–µ–º –∫—ç—à CUDA
            torch.cuda.empty_cache()
        
        # –ó–∞–≥—Ä—É–∂–∞–µ–º —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–µ–π
        MODEL = SentenceTransformer(model_name, device=device)
        MODEL.max_seq_length = 2048
        
        # Mixed precision –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏
        if device == "cuda":
            MODEL.half()
            
    except OSError as e:
        if "–§–∞–π–ª –ø–æ–¥–∫–∞—á–∫–∏ —Å–ª–∏—à–∫–æ–º –º–∞–ª" in str(e):
            # Fallback –Ω–∞ –º–µ–Ω—å—à–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç
            MODEL.max_seq_length = 512
```

## üöÄ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU**: 9.3% (1.12GB –∏–∑ 12GB)
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM**: +1.8GB (–ø—Ä–∏–µ–º–ª–µ–º–æ)
- **–°–∫–æ—Ä–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏**: ~200 —Ç–µ–∫—Å—Ç–æ–≤ –∑–∞ 7 —Å–µ–∫—É–Ω–¥
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: 2048 —Å–∏–º–≤–æ–ª–æ–≤ (–ø–æ–ª–Ω—ã–π)

### –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø–∞–º—è—Ç–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- ‚úÖ Fallback –º–µ—Ö–∞–Ω–∏–∑–º—ã
- ‚úÖ –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- ‚úÖ –ü–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç 2048 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ –ë–∞—Ç—á–µ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚úÖ Mixed precision
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è RTX 3060

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–æ –∏ –ø–æ—Å–ª–µ

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –î–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ | –ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ |
|----------|----------------|-------------------|
| –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–∏ | –ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ GUI | –ü–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ GPU | 2.2GB –ø–æ—Å—Ç–æ—è–Ω–Ω–æ | 1.12GB –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ |
| –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ RAM | +1.8GB –ø–æ—Å—Ç–æ—è–Ω–Ω–æ | +1.8GB –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç | 512 —Å–∏–º–≤–æ–ª–æ–≤ | 2048 —Å–∏–º–≤–æ–ª–æ–≤ |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ | –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è | –ë–∞—Ç—á–µ–≤–∞—è (32 —ç–ª–µ–º–µ–Ω—Ç–∞) |
| –û—à–∏–±–∫–∏ –ø–∞–º—è—Ç–∏ | ‚ùå –ß–∞—Å—Ç—ã–µ | ‚úÖ –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç |
| –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å | ‚ùå –ù–∏–∑–∫–∞—è | ‚úÖ –í—ã—Å–æ–∫–∞—è |

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### –î–ª—è –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (RTX 3060 12GB + 16GB RAM):
1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é**: `gui_ru.py`
2. **–†–∞–∑–º–µ—Ä –±–∞—Ç—á–∞**: 32 (–æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π)
3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç**: 2048 —Å–∏–º–≤–æ–ª–æ–≤ (–ø–æ–ª–Ω—ã–π)
4. **Mixed precision**: –í–∫–ª—é—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:
```bash
# –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è
python run_gui_ru.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞
python test_optimized_processor.py

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø–∞–º—è—Ç–∏
python memory_diagnostics.py
```

## üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é!** 

- ‚úÖ **–û—à–∏–±–∫–∞ –ø–∞–º—è—Ç–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∞** —á–µ—Ä–µ–∑ –ª–µ–Ω–∏–≤—É—é –∑–∞–≥—Ä—É–∑–∫—É
- ‚úÖ **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞** –¥–ª—è RTX 3060
- ‚úÖ **–ö–æ–Ω—Ç–µ–∫—Å—Ç —É–≤–µ–ª–∏—á–µ–Ω** –¥–æ 2048 —Å–∏–º–≤–æ–ª–æ–≤
- ‚úÖ **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –ø–æ–≤—ã—à–µ–Ω–∞** —á–µ—Ä–µ–∑ –±–∞—Ç—á–µ–≤—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É
- ‚úÖ **–†–µ—Å—É—Ä—Å—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ** (9.3% GPU)

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π RTX 3060! üöÄ
