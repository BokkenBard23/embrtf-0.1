## CallCenter AI v3 — Анализ диалогов и поиск по репликам

Современный инструмент для офлайн-обработки RTF-диалогов call-центра, построения эмбеддингов по репликам, индексации в FAISS и интерактивного поиска/аналитики через десктопный GUI. Поддерживаются HyDE и (опционально) CrossEncoder-reranker.

### Возможности
- Импорт .rtf диалогов из тематических папок `Input/<Тема>` и автонормализация реплик.
- Экстракция метаданных из имени файла и тела диалога.
- Кодирование реплик через `SentenceTransformer` и сохранение в SQLite.
- Индексация эмбеддингов в FAISS по темам и общий индекс `all`.
- Поиск по репликам в GUI с отображением ближайшего контекста из диалога.
- Настраиваемые методы анализа ответа (см. `analysis_methods.py`).
- Экспорт найденного контекста и ответа в `.txt`.

### Структура проекта (основное)
- `pipeline.py` — обработка RTF, парсинг диалогов на реплики, эмбеддинги, запись в БД.
- `indexer.py` — построение FAISS-индексов по репликам (по темам и общий).
- `gui.py` — настольный интерфейс для поиска и анализа.
- `analyze_dialogs.py` — статистический анализ длины диалогов и рекомендации по `max_seq_length`.
- `config.py` — настройка путей, моделей, GUI и сервисов.
- `utils.py` — логирование и вспомогательные функции.

### Быстрый старт
1) Подготовьте окружение Python 3.11+ и установите зависимости:
```bash
python -m venv venv
venv\\Scripts\\pip install -r requirements.txt
```
2) Разместите .rtf файлы в тематических папках: `Input/<Тема>/*.rtf`.
3) Запустите обработку:
```bash
venv\\Scripts\\python pipeline.py
```
4) Постройте индексы:
```bash
venv\\Scripts\\python indexer.py
```
5) Запустите GUI:
```bash
venv\\Scripts\\python gui.py
```

Подробности по установке, настройке и сценариям — в папке `docs/`.

### Документация
- `docs/INSTALL.md` — установка, требования (CPU/GPU), Windows заметки.
- `docs/BUILD.md` — сборка исполняемых файлов (PyInstaller, onefile/onedir), ресурсы.
- `docs/CONFIG.md` — параметры `config.py`, модели, ключи, пути.
- `docs/WORKFLOWS.md` — конвейер: импорт → обработка → индексация → GUI.
- `docs/GUI.md` — руководство по использованию интерфейса.
- `docs/ARCHITECTURE.md` — архитектура данных и компонентов.
- `docs/USAGE.md` — примеры запросов, лучшие практики, батчи.
- `docs/TROUBLESHOOTING.md` — типовые ошибки и решения.

### Безопасность и ключи
В `config.py` присутствуют поля с ключами/URL для внешних API. Храните реальные ключи вне репозитория (переменные окружения, секреты CI). При публикации удаляйте чувствительные данные.

### Лицензия
---


